#!/bin/sh

#check tauEleMVAMedium-> did not work
#preselection='pt1>24&&pt2>20&&vertices>0&&diLeptons==0&&lPFIsoDB<0.1&&byCombinedIsolationDeltaBetaCorrRaw3Hits_2<1.5&&tightElectrons<=1&&tightMuons==0'
#preselection='pt1>24&&pt2>20&&vertices>0&&diLeptons==0&&lPFIsoDB<0.1&&tauIso<1.5&&tightElectrons<=1&&tightMuons==0'
preselection='pt1>24&&pt2>20&&vertices>0&&diLeptons==0&&lPFIsoDB<0.1&&tauIso<1.5&&tightElectrons<=1&&tightMuons==0'
#preselection='pt1>24&&pt2>20&&vertices>0&&diLeptons==0&&lPFIsoDB<0.1&&tauIso<1.5&&tightElectrons<=1&&tightMuons==0'
wSelection='mt1>70'
signalSelection='mt1<30'
#qcdselection='pt1>24&&pt2>20&&vertices>0&&diLeptons==0&&lPFIsoDB>0.2&&tauLooseMVAIso>0&&charge!=0&&mt1<20&&lTrigger>0&&tauTrigger>0'
#qcdSelection='pt1>24&&pt2>20&&vertices>0&&tauIso<1.5&&diLeptons==0&&charge!=0&&mt1<30&&lPFIsoDB>0.2&&lTrigger>0&&tauTrigger>0&&tauElectronTightMVA3Pass>0'
qcdSelection='pt1>24&&pt2>20&&vertices>0&&tauIso<1.5&&diLeptons==0&&charge!=0&&mt1<30&&lPFIsoDB>0.2&&lTrigger>0&&tauTrigger>0'

relaxedSelection='pt1>24&&pt2>20&&vertices>0&&mt1<30&&lTrigger>0&&tauTrigger>0'


bTagSF='1'
#bTagSF='EffWEIGHTCSVM'
btagSelection='nJetsPt20>1&&nJetsBTagCSVMPt20==1&&J1Pt>40'
btagRelaxedSelection='nJetsPt20>1&&nJetsBTagCSVMPt20==1&&J1Pt>40'
i#btagRelaxedSelection='nJetsPt20>1&&J1Pt>20'

bTagSF2='1'
btagSelection2='nJetsPt20>1&&nJetsBTagCSVMPt20>1&&J1Pt>40'
btagRelaxedSelection2='nJetsPt20>1&&nJetsBTagCSVMPt20>1&&J1Pt>40'


embWeight='__CORR__*EmbPtWeight*HLT_Mu17_Mu8_fired'

direc='/nfs_scratch/laura/LTau_Nov17/'

luminosity=19790.
topSF=0.96

tauID=1.0
zttScale=1.0
qcdfactor=1.06
binning='binningHighStat=0.,10.,20.,30.,40.,50.,60.,70.,80.,90.,100.,110.,120.,130.,140.,150.,160.,170.,180.,190.,200.,225.,250.,275.,300.,325.,350. binningLowStat=0.,20.,40.,60.,80.,100.,120.,140.,160.,180.,200.,250.,300.,350.' 

mkdir MSSMDataCards



#svMass
MakeDataCardHhh channel='eleTau' shifts='Tau'  dataFile=$direc'DATA.root' zEmbeddedSample=$direc'ETEM.root'   zttFile=$direc'../ZJETS/ZJETS.root' zllFile=$direc'../ZJETS/ZJETS.root' wFile=$direc'../WJETS/WJETS.root' vvFile=$direc'VV_merge.root' topFile=$direc'TOP.root' preselection=$preselection       wSelection=$wSelection               signalSelection='mt1<30'         qcdSelection=$qcdSelection btagSelection=$btagSelection bTagSF=$bTagSF btagSelection2=$btagSelection2 bTagSF2=$bTagSF2  luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF        muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17 bitmask=0,1,0,0   btagRelaxedSelection=$btagRelaxedSelection btagRelaxedSelection2=$btagRelaxedSelection2   relaxedSelection=$relaxedSelection  weight='__WEIGHT__*__CORR__'  embWeight=$embWeight  luminosity=$luminosity  variable='svMass' bins=40 min=20.0 max=420 outputFile='MSSMDataCards/htt_et.inputs-Hhh-8TeV.root' verbose=1 $binning
exit;

